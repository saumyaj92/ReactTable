/*! react-table 23-11-2016 Author: Erfang Chen */
function buildLAFConfigObject(a){var b=a.formatInstructions,c={multiplier:1,roundTo:2,unit:null,alignment:getColumnAlignment(a)};if(!b)return c;for(var d=b.split(/\s+/),e=0;e<d.length;e++){var f=d[e].split(":",2)[0];c[f]=d[e].split(":",2)[1]}return c}function computeCellAlignment(a,b,c){return b.isDetail||isNaN(b[c.colTag])?a:"right"}function buildCellLookAndFeel(a,b){var c={classes:{},styles:{},value:{}},d=b[a.colTag];a.formatConfig=null!=a.formatConfig?a.formatConfig:buildLAFConfigObject(a);var e=a.formatConfig;return a.cellClassCallback&&(c.classes=a.cellClassCallback(b)),d=formatNumber(d,a,e),e.unit&&(d=d+" "+e.unit),"currency"==a.format&&(d="$"+d),c.styles.textAlign=computeCellAlignment(e.alignment,b,a),c.styles.width=a.text.length+"em",c.value=d,e.showZeroAsBlank&&0==c.value&&(c.value=""),c}function getColumnAlignment(a){return"number"==a.format||"currency"==a.format?"right":"left"}function formatNumber(a,b,c){return isNaN(a)||"number"!=b.format&&"currency"!=b.format||""===a||(a*=c.multiplier,a=a.toFixed(c.roundTo),c.separator&&(a=applyThousandSeparator(a))),a}function applyThousandSeparator(a){var b=a.toString().split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b.join(".")}function buildCustomMenuItems(a,b){return b.customMenuFactory&&"function"==typeof b.customMenuFactory?b.customMenuFactory(b,a):b.customMenuItems&&Array.isArray(b.customMenuItems)?b.customMenuItems:void 0}function buildMenu(a){var b=a.table,c=a.columnDef,d=a.style,e=a.isFirstColumn,f={};const g={top:"-20%",left:"100%",padding:"5px"};"right"==d.textAlign?f.right="0%":f.left="0%";var h=[],i={sort:[React.createElement(SubMenu,{onMenuClick:b.handleSetSort.bind(null,c,null),menuItem:React.createElement("span",null,React.createElement("i",{className:"fa fa-sort"})," Sort"),subMenu:React.createElement("div",{className:"rt-header-menu",style:g},React.createElement("div",{className:"menu-item",onClick:b.handleSetSort.bind(null,c,"asc")},React.createElement("i",{className:"fa fa-sort-alpha-asc"})," Asc"),React.createElement("div",{className:"menu-item",onClick:b.handleSetSort.bind(null,c,"desc")},React.createElement("i",{className:"fa fa-sort-alpha-desc"})," Desc"),React.createElement("div",{className:"separator"}),React.createElement("div",{className:"menu-item",onClick:b.handleAddSort.bind(null,c,"asc")},React.createElement("i",{className:"fa fa-plus"}),React.createElement("i",{className:"fa fa-sort-alpha-asc"})," Add Asc"),React.createElement("div",{className:"menu-item",onClick:b.handleAddSort.bind(null,c,"desc")},React.createElement("i",{className:"fa fa-plus"}),React.createElement("i",{className:"fa fa-sort-alpha-desc"})," Add Desc"),React.createElement("div",{className:"separator"}),React.createElement("div",{className:"menu-item",onClick:b.clearSort},React.createElement("i",{className:"fa fa-ban"})," Clear All Sort"))})],filter:[React.createElement("div",{className:"menu-item",onClick:b.handleClearFilter.bind(null,c)},"Clear Filter"),React.createElement("div",{className:"menu-item",onClick:b.handleClearAllFilters},"Clear All Filters"),React.createElement("div",{className:"separator"})],summarize:[React.createElement(SubMenu,{onMenuClick:"number"==c.format||"currency"==c?null:b.handleSubtotalBy.bind(null,c,null),menuItem:React.createElement("span",null,React.createElement("i",{className:"fa fa-list-ul"})," Subtotal"),subMenu:React.createElement("div",{className:"rt-header-menu",style:g},React.createElement(SubtotalControl,{table:b,columnDef:c}),React.createElement("div",{className:"menu-item",onClick:b.handleClearSubtotal},React.createElement("i",{className:"fa fa-ban"})," Clear All Subtotal"))})],remove:[React.createElement("div",{className:"menu-item",onClick:b.handleRemove.bind(null,c)},React.createElement("i",{className:"fa fa-remove"})," Remove Column")],unselect:[React.createElement("div",{className:"menu-item",onClick:b.clearAllRowSelections},React.createElement("i",{className:"fa fa-angle-up"})," Unselect All Rows")]};if(b.props.defaultMenuItems)for(var j=0;j<b.props.defaultMenuItems.length;j++){var k=b.props.defaultMenuItems[j];addMenuItems(h,i[k])}else addMenuItems(h,i.sort),b.props.filtering&&b.props.filtering.disable||addMenuItems(h,i.filter),addMenuItems(h,i.summarize),e||(addMenuItems(h,i.remove),addMenuItems(h,i.unselect));var l=buildCustomMenuItems(b,c);return h.push(l),e&&(h.push(React.createElement("div",{className:"separator"})),b.props.disableExporting||(h.push(React.createElement("div",{className:"menu-item",onClick:b.handleDownload.bind(null,"excel")},React.createElement("i",{className:"fa fa-file-excel-o"})," Download as XLS")),h.push(React.createElement("div",{className:"menu-item",onClick:b.handleDownload.bind(null,"pdf")},React.createElement("i",{className:"fa fa-file-pdf-o"})," Download as PDF"))),h.push(React.createElement("div",{className:"menu-item",onClick:b.handleCollapseAll},"Collapse All")),h.push(React.createElement("div",{className:"menu-item",onClick:b.handleExpandAll},"Expand All"))),React.createElement("div",{style:f,className:"rt-header-menu"},h)}function addMenuItems(a,b){for(var c=0;c<b.length;c++)a.push(b[c])}function toggleFilterBox(a,b){var c=a.state.filterInPlace;c[b]=!c[b],a.setState({filterInPlace:c}),setTimeout(function(){$("input.rt-"+b+"-filter-input").focus()})}function pressedKey(a,b,c){const d=27;a.state.filterInPlace[b]&&c.keyCode==d&&(a.state.filterInPlace[b]=!1,a.setState({filterInPlace:a.state.filterInPlace}))}function buildHeaders(a){var b,c=a.state.columnDefs[0],d={},e=findDefByColTag(a.state.sortBy,c.colTag),f=null;e&&(f=React.createElement("i",{className:"fa fa-sort-"+e.sortType}));var g="btn-link rt-header-anchor-text"+(a.state.filterInPlace[c.colTag]&&"number"!==c.format?" rt-hide":""),h="rt-numeric-filter-container"+("number"===c.format&&a.state.filterInPlace[c.colTag]?"":" rt-hide"),i={width:"100%",height:"13px",padding:"0"},j=React.createElement("div",{className:"rt-headers-container"},React.createElement("div",{style:{textAlign:"center"},onDoubleClick:a.handleSetSort.bind(null,c,null),className:"rt-header-element",key:c.colTag},React.createElement("a",{href:"#",className:g,onClick:a.props.filtering&&a.props.filtering.disable?null:toggleFilterBox.bind(null,a,c.colTag)},buildFirstColumnLabel(a).join("/")),f,React.createElement("input",{style:i,className:"rt-"+c.colTag+"-filter-input rt-filter-input"+(a.state.filterInPlace[c.colTag]&&"number"!==c.format?"":" rt-hide"),onChange:a.handleColumnFilter.bind(null,c),onKeyDown:pressedKey.bind(null,a,c.colTag)})),React.createElement("div",{className:h},React.createElement(NumericFilterPanel,null)),a.state.filterInPlace[c.colTag]?null:buildMenu({table:a,columnDef:c,style:{textAlign:"left"},isFirstColumn:!0})),k=[j];for(b=1;b<a.state.columnDefs.length;b++)c=a.state.columnDefs[b],e=findDefByColTag(a.state.sortBy,c.colTag),f=null,e&&(f=React.createElement("i",{className:"fa fa-sort-"+e.sortType})),d={textAlign:"center"},h="rt-numeric-filter-container"+("number"===c.format&&a.state.filterInPlace[c.colTag]?"":" rt-hide"),g="btn-link rt-header-anchor-text"+(a.state.filterInPlace[c.colTag]&&"number"!==c.format?" rt-hide":""),k.push(React.createElement("div",{className:"rt-headers-container"},React.createElement("div",{onDoubleClick:a.handleSetSort.bind(null,c,null),style:d,className:"rt-header-element rt-info-header",key:c.colTag},React.createElement("a",{href:"#",className:g,onClick:a.props.filtering&&a.props.filtering.disable?null:toggleFilterBox.bind(null,a,c.colTag)},React.createElement("span",null,c.text," ",c.isLoading?React.createElement("i",{className:"fa fa-spinner fa-spin"}):null)),f,React.createElement("input",{style:i,className:"rt-"+c.colTag+"-filter-input rt-filter-input"+(a.state.filterInPlace[c.colTag]&&"number"!==c.format?"":" rt-hide"),onChange:a.handleColumnFilter.bind(null,c),onKeyDown:pressedKey.bind(null,a,c.colTag)})),React.createElement("div",{className:h},React.createElement(NumericFilterPanel,{clearFilter:a.handleClearFilter,addFilter:a.handleColumnFilter,colDef:c,currentFilters:a.state.currentFilters})),a.state.filterInPlace[c.colTag]?null:buildMenu({table:a,columnDef:c,style:d,isFirstColumn:!1})));var l,m="btn-link rt-plus-sign";return!a.props.disableAddColumnIcon&&a.props.cornerIcon&&(l=React.createElement("img",{src:a.props.cornerIcon}),m="btn-link rt-corner-image"),k.push(React.createElement("span",{className:"rt-header-element rt-add-column",style:{textAlign:"center"}},React.createElement("a",{className:m,onClick:a.props.disableAddColumn?null:a.handleAdd},React.createElement("strong",null,l?l:a.props.disableAddColumn?"":React.createElement("i",{className:"fa fa-plus"}))))),React.createElement("div",{className:"rt-headers-grand-container"},React.createElement("div",{key:"header",className:"rt-headers"},k))}function buildFirstCellForRow(){var a,b,c=this.props,d=c.data,e=c.columnDefs[0],f=c.toggleHide,g=e.colTag;if(!d.sectorPath)return React.createElement("td",{key:g,onDoubleClick:this.props.filtering&&this.props.filtering.doubleClickCell?this.props.handleColumnFilter(null,e):null},d[g]);var h=d.isDetail?d.sectorPath.length:d.sectorPath.length-1,i={paddingLeft:10+25*h+"px"};return a=!d.isDetail&&e.summaryTemplate?e.summaryTemplate.call(null,d):null,b=d.isDetail?React.createElement("td",{style:i,key:g,onDoubleClick:this.props.filtering&&this.props.filtering.doubleClickCell?this.props.handleColumnFilter(null,e):null},d[g]):React.createElement("td",{style:i,key:g},React.createElement("a",{onClick:f.bind(null,d),className:"btn-link rt-expansion-link"},d.treeNode.collapsed?React.createElement("i",{className:"fa fa-plus"}):React.createElement("i",{className:"fa fa-minus"})),"  ",React.createElement("strong",null,d[g]),a)}function buildFooter(a,b){return a.props.columnDefs.length>0&&!a.props.disablePagination?React.createElement(PageNavigator,{items:b.allPages.slice(b.pageDisplayRange.start,b.pageDisplayRange.end),activeItem:a.state.currentPage,numPages:b.pageEnd,handleClick:a.handlePageClick}):null}function getSectorName(a,b){var c="",d=null;if("number"==b.format||"currency"==b.format){var e=resolvePartitionName(b,a);c=e.sectorName,d=e.sortIndex}else c=a[b.colTag];return{sectorName:c||"Other",sortIndex:d}}function aggregateSector(a,b,c){for(var d={},e=1;e<b.length;e++)d[b[e].colTag]=aggregateColumn(a,b[e],c);return d}function resolvePartitionName(a,b){var c="",d="";if(a.subtotalByRange){for(var e=0;e<a.subtotalByRange.length;e++)if(b[a.colTag]<a.subtotalByRange[e]){c=a.text+" "+(0!=e?a.subtotalByRange[e-1]:0)+" - "+a.subtotalByRange[e],d=e;break}c||(c=a.text+" "+a.subtotalByRange[a.subtotalByRange.length-1]+"+",d=e+1)}else c=a.text;return{sectorName:c,sortIndex:d}}function resolveAggregationMethod(a,b){var c;if("function"==typeof a.aggregationFunction)c=a.aggregationFunction;else if("string"==typeof a.aggregationMethod)c=a.aggregationMethod.toLowerCase();else if(a.conditionalAggregationMethod&&b&&1==b.length){var d=b[0].colTag;a.conditionalAggregationMethod[d]&&(c=a.conditionalAggregationMethod[d].toLowerCase())}return c}function aggregateColumn(a,b,c){var d,e=resolveAggregationMethod(b,c);if("function"==typeof e)d=e({data:a,columnDef:b});else switch(e){case"sum":d=_straightSumAggregation({data:a,columnDef:b});break;case"average":d=_average({data:a,columnDef:b});break;case"count":d=_count({data:a,columnDef:b});break;case"count_distinct":d=_countDistinct({data:a,columnDef:b});break;case"count_and_distinct":d=_countAndDistinct({data:a,columnDef:b});break;case"most_data_points":d=_mostDataPoints({data:a,columnDef:b});break;default:d=""}return d}function _straightSumAggregation(a){for(var b=a.data,c=a.columnDef,d=0,e=0,f=0;f<b.length;f++)e=b[f][c.colTag]||0,d+=e;return d}function _average(a){return a.columnDef.weightBy?_weightedAverage(a):_simpleAverage(a)}function _simpleAverage(a){for(var b=_straightSumAggregation(a),c=0,d=0;d<a.data.length;d++)(a.data[d][a.columnDef.colTag]||0===a.data[d][a.columnDef.colTag])&&c++;return 0==c?"":b/c}function _weightedAverage(a){for(var b=a.data,c=a.columnDef,d=a.columnDef.weightBy,e=0,f=0;f<b.length;f++)e+=(b[f][c.colTag]||0)*(b[f][d.colTag]||0);var g=_straightSumAggregation({data:b,columnDef:d});return 0==g?0:e/g}function _count(a){return a.data.length||0}function _countDistinct(a){var b=a.data,c=a.columnDef;if(0==b.length)return 0;const d=a.data.map(function(a){return a[c.colTag]}),e=[];for(var f=0;f<d.length;f++)""!==d[f]&&null!==d[f]&&e.indexOf(d[f])==-1&&e.push(d[f]);return 1==e.length?e[0]:e.length}function _countAndDistinct(a){var b=_count(a),c=_countDistinct(a);return 1==b?c:"("+c+"/"+b+")"}function _mostDataPoints(a){for(var b={count:0,index:-1},c=0;c<a.data.length;c++){var d=Object.keys(a.data[c]).length;(d>b.count||d===b.count&&a.data[c].aggregationTiebreaker>a.data[b.index].aggregationTiebreaker)&&(b.count=d,b.index=c)}return b.index==-1?"":a.data[b.index][a.columnDef.colTag]}function exportToExcel(a,b,c){var d="<table><tr>";$.each(a.headers,function(a,b){d+="<td>"+parseString(b)+"</td>"}),d+="</tr>";var e=1;$.each(a.data,function(a,b){if(b.length>0&&"function"==typeof b[0].match&&b[0].match("Grand Total"))return void e++;d+="<tr>";var f=0;$.each(b,function(a,b){c.state.columnDefs[a]&&c.state.columnDefs[a].format&&"date"===c.state.columnDefs[a].format.toLowerCase()&&"number"==typeof b&&(b=new Date(b).toLocaleDateString()),d+="<td>"+parseString(b)+"</td>",f++}),e++,d+="</tr>"}),d+="</table>";var f="<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:x='urn:schemas-microsoft-com:office:excel' xmlns='http://www.w3.org/TR/REC-html40'>";f+="<head>",f+="<!--[if gte mso 9]>",f+="<xml>",f+="<x:ExcelWorkbook>",f+="<x:ExcelWorksheets>",f+="<x:ExcelWorksheet>",f+="<x:Name>",f+="{worksheet}",f+="</x:Name>",f+="<x:WorksheetOptions>",f+="<x:DisplayGridlines/>",f+="</x:WorksheetOptions>",f+="</x:ExcelWorksheet>",f+="</x:ExcelWorksheets>",f+="</x:ExcelWorkbook>",f+="</xml>",f+="<![endif]-->",f+="</head>",f+="<body>",f+=d,f+="</body>",f+="</html>";var g=window.navigator.userAgent,h=g.indexOf("MSIE ");if(h>0||navigator.userAgent.match(/Trident.*rv\:11\./)){var i=$("<iframe></iframe>").css("display","none").attr("id","ieExcelFrame").appendTo("body");ieExcelFrame.document.open("txt/html","replace"),ieExcelFrame.document.write(f),ieExcelFrame.document.close(),ieExcelFrame.focus(),ieExcelFrame.document.execCommand("SaveAs",!0,b+".xls"),i.remove()}else{var j="data:application/vnd.ms-excel;base64,",k=f,l=function(a){return window.btoa(unescape(encodeURIComponent(a)))},m=function(a,b){return a.replace(/{(\w+)}/g,function(a,c){return b[c]})},c=d,n={worksheet:b,table:c},o=j+l(m(k,n));$("<a></a>").attr("download",b+".xls").attr("href",o).append("<div id='download-me-now'></div>").appendTo("body"),$("#download-me-now").click().remove()}}function exportToPDF(a,b,c){var d={separator:",",ignoreColumn:[],tableName:"yourTableName",pdfFontSize:6,pdfLeftMargin:20},e=new jsPDF("l","pt","letter",(!0)),f=[],g=d.pdfLeftMargin;$.each(a.headers,function(a,b){var c=4.5*parseString(b,!0).length;(!f[a]||f[a]<c)&&(f[a]=Math.max(30,c))}),$.each(a.data,function(a,b){b.length>0&&"function"==typeof b[0].match&&b[0].match("Grand Total")||$.each(b,function(a,b){var c=4.5*parseString(b,!0).length;(!f[a]||f[a]<c)&&(f[a]=Math.max(30,c))})});var h=f.reduce(function(a,b){return a+b});if(h>752){var i=752/h;e.setFontSize(i*d.pdfFontSize);for(var j=0;j<f.length;j++)f[j]=f[j]*i}else e.setFontSize(d.pdfFontSize);$.each(a.headers,function(a,b){var c=f.reduce(function(b,c,d){return d<a?b+c:b},g);e.text(c,20,parseString(b,!0))});var k=20,l=1,m=0,n=1;$.each(a.data,function(a,b){b.length>0&&"function"==typeof b[0].match&&b[0].match("Grand Total")||(n++,n%50==0&&(e.addPage(),l++,n=1),m=k+10*n,$.each(b,function(a,b){var d=f.reduce(function(b,c,d){return d<a?b+c:b},g);c.state.columnDefs[a].format&&"date"===c.state.columnDefs[a].format.toLowerCase()&&"number"==typeof b&&(b=new Date(b).toLocaleDateString()),e.text(d,m,parseString(b,!0))}))}),e.output("save",b+".pdf")}function parseString(a,b){if("string"!=typeof a){if(!a||!a.toString)return"";a=a.toString()}var c=a.trim();return c=c.replace(/[^\x00-\x7F]/g,""),b&&(c=c.substr(0,20)),c}function generateSectorKey(a){return null==a?"":a.join("#")}function generateRowKey(a,b){var c;return c=a.isDetail?b?a[b]:a.rowCount:generateSectorKey(a.sectorPath)}function rowMapper(a){var b=this.props.rowKey,c=generateRowKey(a,b);return React.createElement(Row,{key:c,data:a,extraStyle:resolveExtraStyles(c,this.props.extraStyle),isSelected:isRowSelected(a,this.props.rowKey,this.state.selectedDetailRows,this.state.selectedSummaryRows),onSelect:this.handleSelect,onRightClick:this.props.onRightClick,toggleHide:this.handleToggleHide,columnDefs:this.state.columnDefs,filtering:this.props.filtering,handleColumnFilter:this.handleColumnFilter.bind})}function docClick(a){adjustHeaders.call(this),jQuery.isEmptyObject(this.state.filterInPlace)||$(a.target).hasClass("rt-headers-container")||$(a.target).parents(".rt-headers-container").length>0||this.setState({filterInPlace:{}})}function adjustHeaders(a){var b=this.state.uniqueId;a>=0||(a=0);var c=0,d=$("#"+b+" .rt-headers-container"),e=parseInt(d.first().find(".rt-header-element").css("padding-left"));e+=parseInt(d.first().find(".rt-header-element").css("padding-right"));var f=!1;if(d.each(function(){var a=$(this),g=$("#"+b+" .rt-table tr:last td:eq("+c+")").outerWidth()-1;0==c&&1==parseInt(d.first().css("border-right"))&&(g+=1);var h=a.find(".rt-header-anchor-text").width()+e;a.width()>0&&h>a.width()+1&&(a.css("width",h+"px"),$("#"+b).find("tr").find("td:eq("+c+")").css("min-width",h+"px"),f=!0),g!==a.width()&&(a.width(g),f=!0),c++}),f){var g=d.find(".rt-downward-caret").removeClass("rt-downward-caret"),h=d.find(".rt-upward-caret").removeClass("rt-upward-caret");setTimeout(function(){g.addClass("rt-downward-caret"),h.addClass("rt-upward-caret")},0),a<=5&&adjustHeaders.call(this,++a)}}function bindHeadersToMenu(a){a.find(".rt-headers-container").each(function(){var a=this;$(a).hover(function(){var b=$(a).position();b.left&&$(a).find(".rt-header-menu").css("left",b.left+"px"),b.right&&$(a).find(".rt-header-menu").css("right",b.right+"px")})})}function uniqueId(a){var b=++idCounter+"";return a?a+b:b}function isRowSelected(a,b,c,d){if(null!=b)return null!=c[a[b]]||!a.isDetail&&null!=d[generateSectorKey(a.sectorPath)]}function resolveExtraStyles(a,b){return a&&b?b[a]:null}function getPaginationAttr(a,b){var c={};if(a.props.disablePagination)c.lowerVisualBound=0,c.upperVisualBound=b.length;else{c.pageSize=a.props.pageSize||50,c.maxDisplayedPages=a.props.maxDisplayedPages||10,c.pageStart=1,c.pageEnd=Math.ceil(b.length/c.pageSize),c.allPages=[];for(var d=c.pageStart;d<=c.pageEnd;d++)c.allPages.push(d);c.pageDisplayRange=computePageDisplayRange(a.state.currentPage,c.maxDisplayedPages),c.lowerVisualBound=(a.state.currentPage-1)*c.pageSize,c.upperVisualBound=Math.min(a.state.currentPage*c.pageSize-1,b.length)}return c}function computePageDisplayRange(a,b){var c=b,d=Math.min(Math.floor(c/2),a-1),e=c-d;return{start:a-d-1,end:a+e-1}}function ReactTableGetInitialState(){var a={uniqueId:uniqueId("table"),currentPage:1,lastScrollTop:0,columnDefs:this.props.columnDefs,subtotalBy:this.props.subtotalBy,sortBy:this.props.sortBy,lowerVisualBound:0,upperVisualBound:this.props.pageSize,extraStyle:{},filterInPlace:{},currentFilters:[]};a.rootNode=createNewRootNode(this.props,a),a.sortBy.length>0&&a.rootNode.sortNodes(convertSortByToFuncs(a.columnDefs,a.sortBy));var b=getInitialSelections(this.props.selectedRows,this.props.selectedSummaryRows);return a.selectedDetailRows=b.selectedDetailRows,a.selectedSummaryRows=b.selectedSummaryRows,a}function ReactTableHandleSelect(a){var b=this.props.rowKey;null!=b&&(null!=a.isDetail&1==a.isDetail?this.props.onSelectCallback(a,this.toggleSelectDetailRow(a[b])):this.props.onSummarySelectCallback&&this.props.onSummarySelectCallback(a,this.toggleSelectSummaryRow(generateSectorKey(a.sectorPath))))}function ReactTableHandleColumnFilter(a,b,c){"boolean"!=typeof c&&(c=void 0);var d=b.target?b.target.value||b.target.textContent:b,e=!(this.props.filtering&&this.props.filtering.caseSensitive===!1);if(!c)for(var f=0;f<this.state.currentFilters.length;f++)if(this.state.currentFilters[f].colDef===a){this.state.currentFilters.splice(f,1),this.handleClearFilter(a,!0);break}var g;this.props.filtering&&this.props.filtering.customFilterer&&(g=this.props.filtering.customFilterer),this.state.rootNode.filterByColumn(a,d,e,g),c||(this.state.currentFilters.push({colDef:a,filterText:d}),$("input.rt-"+a.colTag+"-filter-input").val(d),this.setState({rootNode:this.state.rootNode,currentFilters:this.state.currentFilters}))}function ReactTableHandleRemoveFilter(a,b){"boolean"!=typeof b&&(b=void 0);for(var c=0;c<this.state.rootNode.ultimateChildren.length;c++)this.state.rootNode.ultimateChildren[c].hiddenByFilter=!1;for(c=0;c<this.state.currentFilters.length;c++)if(this.state.currentFilters[c].colDef===a){this.state.currentFilters.splice(c,1);break}for(c=0;c<this.state.currentFilters.length;c++)this.handleColumnFilter(this.state.currentFilters[c].colDef,this.state.currentFilters[c].filterText,!0);if(!b){var d=this.state.filterInPlace;delete d[a.colTag],this.setState({filterInPlace:d,rootNode:this.state.rootNode,currentFilters:this.state.currentFilters}),$("input.rt-"+a.colTag+"-filter-input").val("")}}function ReactTableHandleRemoveAllFilters(){recursivelyClearFilters(this.state.rootNode),this.setState({filterInPlace:{},rootNode:this.state.rootNode,currentFilters:[]}),$("input.rt-filter-input").val("")}function recursivelyClearFilters(a){a.clearFilter();for(var b=0;b<a.children.length;b++)recursivelyClearFilters(a.children[b]);if(!a.hasChild())for(var b=0;b<a.ultimateChildren.length;b++)a.ultimateChildren[b].hiddenByFilter=!1}function applyAllFilters(){for(var a=0;a<this.state.currentFilters.length;a++)this.handleColumnFilter(this.state.currentFilters[a].colDef,this.state.currentFilters[a].filterText,!0);this.setState({rootNode:this.state.rootNode})}function ReactTableHandleClearSubtotal(a){a.stopPropagation();const b=this.state;b.currentPage=1,b.lowerVisualBound=0,b.upperVisualBound=this.props.pageSize,b.firstColumnLabel=buildFirstColumnLabel(this);for(const c=this.state.subtotalBy;c.length>0;)c.pop();b.subtotalBy=c,b.rootNode=createNewRootNode(this.props,b),this.state.sortBy.length>0&&b.rootNode.sortNodes(convertSortByToFuncs(this.state.columnDefs,this.state.sortBy)),this.setState(b)}function ReactTableHandleSubtotalBy(a,b,c){c.stopPropagation();const d=this.state.subtotalBy||[];null!=b&&""!=b&&a&&(a.subtotalByRange=partitionNumberLine(b)),null!=a&&"SyntheticMouseEvent"!=a.constructor.name&&d.push(a),this.state.currentFilters.length>0&&applyAllFilters.call(this);const e=this.state;e.currentPage=1,e.lowerVisualBound=0,e.upperVisualBound=this.props.pageSize,e.firstColumnLabel=buildFirstColumnLabel(this),e.subtotalBy=d,e.rootNode=createNewRootNode(this.props,e),this.state.sortBy.length>0&&e.rootNode.sortNodes(convertSortByToFuncs(this.state.columnDefs,this.state.sortBy)),this.setState(e)}function ReactTableHandleAdd(){this.props.beforeColumnAdd&&this.props.beforeColumnAdd(this)}function ReactTableHandleRemove(a){for(var b=this.state.columnDefs.indexOf(a),c=[],d=0;d<this.state.columnDefs.length;d++)d!=b&&c.push(this.state.columnDefs[d]);this.setState({columnDefs:c}),null!=this.props.afterColumnRemove&&this.props.afterColumnRemove(c,a)}function ReactTableHandleToggleHide(a,b){b.stopPropagation(),a.treeNode.collapsed=!a.treeNode.collapsed,this.setState({})}function ReactTableHandlePageClick(a){this.setState({currentPage:a})}function partitionNumberLine(a){var b,c,d=[];for(c=a.split(","),b=0;b<c.length;b++){var e=parseFloat(c[b]);isNaN(e)||d.push(e),d.sort(function(a,b){return a-b})}return d}function buildFirstColumnLabel(a){var b=[];if(a.state.subtotalBy)for(var c=0;c<a.state.subtotalBy.length;c++)b.push(a.state.subtotalBy[c].text);return b.push(a.state.columnDefs[0].text),b}function getInitialSelections(a,b){var c={selectedDetailRows:{},selectedSummaryRows:{}};if(null!=a)for(var d=0;d<a.length;d++)c.selectedDetailRows[a[d]]=1;if(null!=b)for(var d=0;d<b.length;d++)c.selectedSummaryRows[b[d]]=1;return c}function getSortFunction(a,b){const c=a.format||"";var d=lexicalSorter[b].bind(a);return a.sort&&a[b]?d=a.sort[b].bind(a):"date"!==c&&"DATE"!==c||(d=dateSorter[b].bind(a)),d}function convertSortByToFuncs(a,b){return b.map(function(b){const c=findDefByColTag(a,b.colTag);return c?getSortFunction(c,b.sortType):function(){}})}function findPositionByColTag(a,b){var c=-1;return $.each(a,function(a,d){d.colTag===b&&(c=a)}),c}function findDefByColTag(a,b){var c=null;return $.each(a,function(a,d){d.colTag===b&&(c=d)}),c}function createNewRootNode(a,b){var c=buildTreeSkeleton(a,b);return recursivelyAggregateNodes(c,b),c.sortRecursivelyBySortIndex(),c.foldSubTree(),c}function buildTreeSkeleton(a,b){var c,d=new TreeNode("Grand Total",null),e=a.data;for(a.disableGrandTotal&&(d.display=!1),c=0;c<e.length;c++)d.appendUltimateChild(e[c]),populateChildNodesForRow(d,e[c],b.subtotalBy);return d}function recursivelyAggregateNodes(a,b){if(a.rowData=aggregateSector(a.ultimateChildren,b.columnDefs,b.subtotalBy),a.children.length>0)for(var c=0;c<a.children.length;c++)recursivelyAggregateNodes(a.children[c],b)}function populateChildNodesForRow(a,b,c){var d,e=a;if(null!=c&&0!=c.length)for(d=0;d<c.length;d++){var f=getSectorName(b,c[d]);e=e.appendRowToChildren({childSectorName:f.sectorName,childRow:b,sortIndex:f.sortIndex,subtotalByColumnDef:c[d]})}}function TreeNode(a,b){this.sectorTitle=a,this.parent=b,this.subtotalByColumnDef={},this.rowData=null,this.display=!0,this.children=[],this.ultimateChildren=[],this.collapsed=null!=this.parent,this.sortIndex=null,this.hiddenByFilter=!1,this._childrenSectorNameMap={}}function buildCompositeSorter(a,b){return function(c,d){for(var e=0,f=0;0==f&&e<a.length;)f=b?a[e](c.rowData,d.rowData):a[e](c,d),e++;return f}}function _hasSortIndex(a){return null!=a&&null!=a.sortIndex&&!isNaN(a.sortIndex)}function rasterizeTree(a){var b=a.node,c=a.firstColumn;b=_decorateRowData(b,c);var d=0==b.display?[]:[b.rowData];return b.collapsed||(b.children.length>0?_rasterizeChildren(d,a):_rasterizeDetailRows(b,d)),d}function _rasterizeChildren(a,b){var c,d,e,f=b.node,g=b.firstColumn;for(c=0;c<f.children.length;c++)for(e=rasterizeTree({node:f.children[c],firstColumn:g}),d=0;d<e.length;d++)e[d].treeNode&&e[d].treeNode.hiddenByFilter||a.push(e[d])}function _rasterizeDetailRows(a,b){for(var c=0;c<a.ultimateChildren.length;c++){var d=a.ultimateChildren[c];d.hiddenByFilter||(d.sectorPath=a.rowData.sectorPath,d.isDetail=!0,b.push(d))}}function _decorateRowData(a,b){return a.rowData.sectorPath=a.getSectorPath(),a.rowData[b.colTag]=a.sectorTitle,a.rowData.treeNode=a,a}const InfoBox=React.createClass({displayName:"InfoBox",propTypes:{title:React.PropTypes.string.isRequired,text:React.PropTypes.string.isRequired,styles:React.PropTypes.object},getInitialState:function(){return{showInfoBox:!1}},getDefaultProps:function(){return{styles:{position:"absolute",whiteSpace:"normal",top:"150%",right:"0",fontSize:"10px",textShadow:"none",backgroundColor:"#f0f3f5",color:"#4a5564",width:"250px",padding:"10px",borderRadius:"1px"}}},showInfoBox:function(){this.setState({showInfoBox:!0})},hideInfoBox:function(){this.setState({showInfoBox:!1})},render:function(){var a=this.state.showInfoBox?React.createElement("div",{style:this.props.styles},React.createElement("div",null,this.props.text)):null;return React.createElement("div",{style:{position:"relative"},className:"menu-item",onMouseEnter:this.showInfoBox,onMouseLeave:this.hideInfoBox},React.createElement("div",null,this.props.title),a)}}),SubMenu=React.createClass({displayName:"SubMenu",propTypes:{subMenu:React.PropTypes.object,menuItem:React.PropTypes.object,onMenuClick:React.PropTypes.func},getDefaultProps:function(){return{onMenuClick:function(){}}},getInitialState:function(){return{showSubMenu:!1}},showSubMenu:function(){this.setState({showSubMenu:!0})},hideSubMenu:function(){this.setState({showSubMenu:!1})},render:function(){const a=this.state.showSubMenu?this.props.subMenu:null;return React.createElement("div",{onClick:this.props.onMenuClick,className:"menu-item",style:{position:"relative"},onMouseEnter:this.showSubMenu,onMouseLeave:this.hideSubMenu},this.props.menuItem,a)}});var NumericFilterPanel=React.createClass({displayName:"NumericFilterPanel",getInitialState:function(){return{entry0:{checked:!0,dropdown:"gt",input:""},entry1:{checked:!1,dropdown:"gt",input:""}}},handleChange:function(a){var b=$(this.getDOMNode()),c=b.find(".rt-numeric-checkbox");this.props.clearFilter(this.props.colDef);for(var d=[],e=0;e<c.length;e++){var f={},g=b.find(".rt-numeric-input").eq(e).val(),h=b.find(".rt-numeric-dropdown").eq(e).find(":selected").val();f[h]=g,c.eq(e).is(":checked")?(d.push(f),this.state["entry"+e].checked=!0):this.state["entry"+e].checked=!1,this.state["entry"+e].dropdown=h,this.state["entry"+e].input=g}this.props.addFilter(this.props.colDef,d),this.setState({entry0:this.state.entry0,entry1:this.state.entry1})},changeCheckbox:function(a){var b="entry"+$(a.target).data("order");this.state[b].checked=a.target.checked,this.setState({entryName:this.state[b]})},render:function(){var a={width:"70px"};return React.createElement("div",null,React.createElement("input",{"data-order":"0",className:"rt-numeric-checkbox",type:"checkbox",checked:this.state.entry0.checked,onChange:this.changeCheckbox}),React.createElement("select",{"data-order":"0",className:"rt-numeric-dropdown"},React.createElement("option",{value:"gt"},"Greater Than"),React.createElement("option",{value:"lt"},"Less Than"),React.createElement("option",{value:"eq"},"Equals")),React.createElement("input",{"data-order":"0",className:"rt-numeric-input",style:a,type:"number"}),React.createElement("br",null),React.createElement("input",{"data-order":"1",className:"rt-numeric-checkbox",type:"checkbox",checked:this.state.entry1.checked,onChange:this.changeCheckbox}),React.createElement("select",{"data-order":"1",className:"rt-numeric-dropdown"},React.createElement("option",{value:"gt"},"Greater Than"),React.createElement("option",{value:"lt"},"Less Than"),React.createElement("option",{value:"eq"},"Equals")),React.createElement("input",{"data-order":"1",className:"rt-numeric-input",style:a,type:"number"}),React.createElement("br",null),React.createElement("button",{onClick:this.handleChange},"Submit"))}}),idCounter=0,ReactTable=React.createClass({displayName:"ReactTable",getInitialState:ReactTableGetInitialState,propTypes:{data:React.PropTypes.arrayOf(React.PropTypes.object).isRequired,columnDefs:React.PropTypes.arrayOf(React.PropTypes.object).isRequired,subtotalBy:React.PropTypes.arrayOf(React.PropTypes.object),sortBy:React.PropTypes.arrayOf(React.PropTypes.object),selectedRows:React.PropTypes.arrayOf(React.PropTypes.string),rowKey:React.PropTypes.string,afterColumnRemove:React.PropTypes.func,beforeColumnAdd:React.PropTypes.func,onSelectCallback:React.PropTypes.func,onSummarySelectCallback:React.PropTypes.func,onRightClick:React.PropTypes.func,disableAddColumn:React.PropTypes.bool,disablePagination:React.PropTypes.bool,disableInfiniteScrolling:React.PropTypes.bool,disableExporting:React.PropTypes.bool,disableGrandTotal:React.PropTypes.bool,pageSize:React.PropTypes.number},getDefaultProps:function(){return{pageSize:50,extraStyle:{cursor:"pointer"},subtotalBy:[],sortBy:[]}},handleSetSort:function(a,b,c){c.stopPropagation();const d=this.state.sortBy,e=findDefByColTag(d,a.colTag);for(b=b||(e&&"asc"===e.sortType?"desc":"asc");d.length>0;)d.pop();d.push({colTag:a.colTag,sortType:b});var f={sortBy:d};this.state.rootNode.sortNodes(convertSortByToFuncs(this.state.columnDefs,d)),f.rootNode=this.state.rootNode,this.setState(f)},handleAddSort:function(a,b,c){c.stopPropagation();const d=this.state.sortBy;var e=findPositionByColTag(d,a.colTag);e!=-1?d[e].sortType=b:d.push({colTag:a.colTag,
sortType:b});var f={sortBy:d};this.state.rootNode.sortNodes(convertSortByToFuncs(this.state.columnDefs,d)),f.rootNode=this.state.rootNode,this.setState(f)},clearSort:function(a){a.stopPropagation();for(const b=this.state,c=this.state.sortBy;c.length>0;)c.pop();b.sortBy=c,b.rootNode=createNewRootNode(this.props,this.state),this.setState(b)},handleColumnFilter:ReactTableHandleColumnFilter,handleClearFilter:ReactTableHandleRemoveFilter,handleClearAllFilters:ReactTableHandleRemoveAllFilters,handleAdd:ReactTableHandleAdd,handleRemove:ReactTableHandleRemove,handleToggleHide:ReactTableHandleToggleHide,handleSubtotalBy:ReactTableHandleSubtotalBy,handleClearSubtotal:ReactTableHandleClearSubtotal,handlePageClick:ReactTableHandlePageClick,handleSelect:ReactTableHandleSelect,handleCollapseAll:function(){this.state.rootNode.foldSubTree(),this.state.rootNode.collapseImmediateChildren(),this.setState({currentPage:1,lowerVisualBound:0,upperVisualBound:this.props.pageSize})},handleExpandAll:function(){this.state.rootNode.expandRecursively(),this.setState({currentPage:1,lowerVisualBound:0,upperVisualBound:this.props.pageSize})},handleDownload:function(a){var b=this,c={headers:[],data:[]},d=this.state.columnDefs[0],e=rasterizeTree({node:this.state.rootNode,firstColumn:d,selectedDetailRows:this.state.selectedDetailRows});$.each(this.props.columnDefs,function(){c.headers.push(this.text)}),$.each(e,function(){if("Grand Total"!==this[d.colTag]){var a=[],e=this;$.each(b.props.columnDefs,function(){a.push(buildCellLookAndFeel(this,e).value)}),c.data.push(a)}}),"excel"===a?exportToExcel(c,this.props.filenameToSaveAs?this.props.filenameToSaveAs:"table-export",this):"pdf"===a&&exportToPDF(c,this.props.filenameToSaveAs?this.props.filenameToSaveAs:"table-export",this)},toggleSelectDetailRow:function(a){var b,c=this.state.selectedDetailRows;return null!=c[a]?(delete c[a],b=!1):(c[a]=1,b=!0),this.setState({selectedDetailRows:c}),b},toggleSelectSummaryRow:function(a){var b,c=this.state.selectedSummaryRows;return null!=c[a]?(delete c[a],b=!1):(c[a]=1,b=!0),this.setState({selectedSummaryRows:c}),b},forceSort:function(){this.state.rootNode.sortNodes(convertSortByToFuncs(this.state.columnDefs,this.state.sortBy)),this.setState({})},getDetailToggleState:function(a){return this.state.selectedDetailRows[a]&&!0},clearAllRowSelections:function(){this.setState({selectedDetailRows:{},selectedSummaryRows:{}})},getRowSelectionStates:function(){return{selectedDetailRows:this.state.selectedDetailRows,selectedSummaryRows:this.state.selectedSummaryRows}},addColumn:function(a,b){var c=this.state.columnDefs;a.colTag&&findPositionByColTag(c,a.colTag)==-1&&(b?c.splice(b+1,0,a):c.push(a),recursivelyAggregateNodes(this.state.rootNode,this.state),this.setState({columnDefs:c}))},handleScroll:function(a){const b=$(a.target),c=b.scrollTop(),d=b.height(),e=b.find("tbody").height(),f=e/b.find("tbody > tr").length;var g={lastScrollTop:c};const h=2*this.props.pageSize;if(c<this.state.lastScrollTop&&c<=0)g.lowerVisualBound=Math.max(this.state.lowerVisualBound-this.props.pageSize,0),g.upperVisualBound=g.lowerVisualBound+h,0!==g.lowerVisualBound&&setTimeout(function(){b.scrollTop(Math.max(c+this.props.pageSize*f,0))}.bind(this));else if(c>this.state.lastScrollTop&&c+d>=e){g.upperVisualBound=this.state.upperVisualBound+this.props.pageSize>this.state.maxRows?this.state.maxRows:this.state.upperVisualBound+this.props.pageSize,g.lowerVisualBound=Math.max(g.upperVisualBound-h,0);const i=Math.max(g.upperVisualBound-this.state.upperVisualBound,0);i>0&&setTimeout(function(){var a=c-i*f;a>0&&b.scrollTop(a)}.bind(this))}this.setState(g)},componentDidMount:function(){this.props.disableInfiniteScrolling||$(this.getDOMNode()).find(".rt-scrollable").get(0).addEventListener("scroll",this.handleScroll),setTimeout(function(){adjustHeaders.call(this)}.bind(this),0),setTimeout(function(){adjustHeaders.call(this)}.bind(this),500),document.addEventListener("click",docClick.bind(this)),window.addEventListener("resize",adjustHeaders.bind(this));var a=$(this.getDOMNode());a.find(".rt-scrollable").bind("scroll",function(){a.find(".rt-headers").css({overflow:"auto"}).scrollLeft($(this).scrollLeft()),a.find(".rt-headers").css({overflow:"hidden"})}),bindHeadersToMenu(a)},componentWillMount:function(){},componentWillUnmount:function(){window.removeEventListener("resize",adjustHeaders.bind(this)),this.props.disableInfiniteScrolling&&$(this.getDOMNode()).find(".rt-scrollable").get(0).removeEventListener("scroll",this.handleScroll)},componentDidUpdate:function(){adjustHeaders.call(this),bindHeadersToMenu($(this.getDOMNode()))},render:function(){const a=rasterizeTree({node:this.state.rootNode,firstColumn:this.state.columnDefs[0],selectedDetailRows:this.state.selectedDetailRows});this.state.maxRows=a.length;var b=getPaginationAttr(this,a),c=[];c=this.props.disableInfiniteScrolling?a.slice(b.lowerVisualBound,b.upperVisualBound+1).map(rowMapper,this):a.slice(this.state.lowerVisualBound,this.state.upperVisualBound+1).map(rowMapper,this);var d=buildHeaders(this),e={};return this.props.height&&parseInt(this.props.height)>0&&(e.height=this.props.height),this.props.disableScrolling&&(e.overflowY="hidden"),React.createElement("div",{id:this.state.uniqueId,className:"rt-table-container"},d,React.createElement("div",{style:e,className:"rt-scrollable"},React.createElement("table",{className:"rt-table"},React.createElement("tbody",null,c))),this.props.disableInfiniteScrolling?buildFooter(this,b):null)}}),Row=React.createClass({displayName:"Row",render:function(){const a=React.addons.classSet;for(var b=[buildFirstCellForRow.call(this)],c=1;c<this.props.columnDefs.length;c++){var d=this.props.columnDefs[c],e=buildCellLookAndFeel(d,this.props.data),f=a(e.classes),g=d.isLoading?"Loading ... ":e.value;d&&d.format&&"date"===d.format.toLowerCase()&&"number"==typeof g&&(g=new Date(g).toLocaleDateString()),d.cellTemplate&&(g=d.cellTemplate.call(this,this.props.data,d,g)),b.push(React.createElement("td",{className:f,onClick:d.onCellSelect?d.onCellSelect.bind(null,this.props.data[d.colTag],d,c):null,onContextMenu:this.props.onRightClick?this.props.onRightClick.bind(null,this.props.data,d):null,style:e.styles,key:d.colTag,onDoubleClick:this.props.filtering&&this.props.filtering.doubleClickCell?this.props.handleColumnFilter(null,d):null},g))}return f=a({selected:this.props.isSelected&&this.props.data.isDetail,"summary-selected":this.props.isSelected&&!this.props.data.isDetail}),React.createElement("tr",{onClick:this.props.onSelect.bind(null,this.props.data),className:f,style:this.props.extraStyle},b)}}),PageNavigator=React.createClass({displayName:"PageNavigator",handleClick:function(a,b){b.preventDefault(),a<=this.props.numPages&&a>=1&&this.props.handleClick(a)},render:function(){var a=this,b=React.addons.classSet,c=b({disabled:1==this.props.activeItem}),d=b({disabled:this.props.activeItem==this.props.numPages}),e=this.props.items.map(function(b){return React.createElement("li",{key:b,className:a.props.activeItem==b?"active":""},React.createElement("a",{onClick:a.handleClick.bind(null,b)},b))});return React.createElement("ul",{className:c,className:"pagination pull-right"},React.createElement("li",{className:d},React.createElement("a",{className:c,onClick:this.props.handleClick.bind(null,this.props.activeItem-1)},"«")),e,React.createElement("li",{className:d},React.createElement("a",{className:d,onClick:this.props.handleClick.bind(null,this.props.activeItem+1)},"»")))}}),SubtotalControl=React.createClass({displayName:"SubtotalControl",getInitialState:function(){return{userInputBuckets:""}},handleChange:function(a){this.setState({userInputBuckets:a.target.value})},handleKeyPress:function(a){13==a.charCode&&(a.preventDefault(),this.props.table.handleSubtotalBy(this.props.columnDef,this.state.userInputBuckets))},handleClick:function(a){a.stopPropagation();var b=$(this.getDOMNode());b.children(".menu-item-input").children("input").focus()},render:function(){var a=this.props.table,b=this.props.columnDef,c="number"==b.format||"currency"==b.format?React.createElement("div",{className:"menu-item-input",style:{position:"absolute",top:"-50%",right:"100%"}},React.createElement("label",{style:{display:"block"}},"Enter Bucket(s)"),React.createElement("input",{tabIndex:"1",onKeyPress:this.handleKeyPress,onChange:this.handleChange,placeholder:"ex: 1,10,15"}),React.createElement("a",{tabIndex:"2",style:{display:"block"},onClick:a.handleSubtotalBy.bind(null,b,this.state.userInputBuckets),className:"btn-link"},"Ok")):null;return React.createElement("div",{onClick:null==c?a.handleSubtotalBy.bind(null,b,null):this.handleClick,style:{position:"relative"},className:"menu-item menu-item-hoverable"},React.createElement("div",null,React.createElement("i",{className:"fa fa-plus"})," Add Subtotal"),c)}});const lexicalSorter={asc:function(a,b){var c=0;return!a[this.colTag]&&(0!==a[this.colTag]||this.formatConfig&&this.formatConfig.showZeroAsBlank)&&b[this.colTag]?c=1:a[this.colTag]&&!b[this.colTag]&&(0!==b[this.colTag]||this.formatConfig&&this.formatConfig.showZeroAsBlank)?c=-1:a[this.colTag]<b[this.colTag]?c=-1:a[this.colTag]>b[this.colTag]&&(c=1),c},desc:function(a,b){var c=0;return!a[this.colTag]&&(0!==a[this.colTag]||this.formatConfig&&this.formatConfig.showZeroAsBlank)&&b[this.colTag]?c=1:a[this.colTag]&&!b[this.colTag]&&(0!==b[this.colTag]||this.formatConfig&&this.formatConfig.showZeroAsBlank)?c=-1:a[this.colTag]<b[this.colTag]?c=1:a[this.colTag]>b[this.colTag]&&(c=-1),c}},dateSorter={asc:function(a,b){return new Date(a[this.colTag])-new Date(b[this.colTag])},desc:function(a,b){return new Date(b[this.colTag])-new Date(a[this.colTag])}};TreeNode.prototype.appendUltimateChild=function(a){this.ultimateChildren.push(a)},TreeNode.prototype.collapseImmediateChildren=function(){for(var a=0;a<this.children.length;a++)this.children[a].collapsed=!0},TreeNode.prototype.foldSubTree=function(){for(var a=0;a<this.children.length;a++)this.children[a].hasChild()?this.children[a].collapsed=!1:this.children[a].collapsed=!0,this.children[a].foldSubTree()},TreeNode.prototype.hasChild=function(){return this.children.length>0},TreeNode.prototype.expandRecursively=function(){var a;for(a=0;a<this.children.length;a++)this.children[a].collapsed=!1,this.children[a].expandRecursively()},TreeNode.prototype.appendRowToChildren=function(a){var b=a.childSectorName,c=a.childRow,d=a.sortIndex,e=a.subtotalByColumnDef;if(null==this._childrenSectorNameMap[b]){var f=new TreeNode(b,this);f.sortIndex=d,f.subtotalByColumnDef=e,this.children.push(f),this._childrenSectorNameMap[b]=f}return c&&this._childrenSectorNameMap[b].appendUltimateChild(c),this._childrenSectorNameMap[b]},TreeNode.prototype.getSectorPath=function(){for(var a=[this.sectorTitle],b=this.parent;null!=b;)a.unshift(b.sectorTitle),b=b.parent;return a},TreeNode.prototype.sortNodes=function(a){this.hasChild()?(this.children.sort(buildCompositeSorter(a,!0)),$.each(this.children,function(b,c){c.sortNodes(a)})):this.ultimateChildren.sort(buildCompositeSorter(a,!1))},TreeNode.prototype.filterByColumn=function(a,b,c,d){"number"===a.format?this.filterByNumericColumn(a,b):this.filterByTextColumn(a,b,c,d)},TreeNode.prototype.filterByTextColumn=function(a,b,c,d){for(var e=0;e<this.children.length;e++){this.children[e].filterByColumn(a,b,c,d);for(var f=!0,g=0;g<this.children[e].ultimateChildren.length;g++)if(!this.children[e].ultimateChildren[g].hiddenByFilter){f=!1;break}this.children[e].hiddenByFilter=f}if(!this.hasChild())for(var e=0;e<this.ultimateChildren.length;e++){var h=this.ultimateChildren[e];if(d)h.hiddenByFilter=!d(a,h,b);else{var i={};i[a.colTag]=h[a.colTag],c?h.hiddenByFilter=h.hiddenByFilter||buildCellLookAndFeel(a,i).value.toString().search(b)===-1:h.hiddenByFilter=h.hiddenByFilter||buildCellLookAndFeel(a,i).value.toString().toUpperCase().search(b.toUpperCase())===-1}}},TreeNode.prototype.filterByNumericColumn=function(a,b){for(var c=0;c<this.children.length;c++){this.children[c].filterByNumericColumn(a,b);for(var d=!0,e=0;e<this.children[c].ultimateChildren.length;e++)if(!this.children[c].ultimateChildren[e].hiddenByFilter){d=!1;break}this.children[c].hiddenByFilter=d}if(!this.hasChild())for(var c=0;c<this.ultimateChildren.length;c++){var f=this.ultimateChildren[c],g={};g[a.colTag]=f[a.colTag];for(var h=!1,i=buildLAFConfigObject(a).multiplier,j=g[a.colTag]*parseFloat(i),e=0;e<b.length;e++)void 0!==b[e].gt?j>b[e].gt||(h=!0):void 0!==b[e].lt?j<b[e].lt||(h=!0):void 0!==b[e].eq&&j!=b[e].eq&&(h=!0);f.hiddenByFilter=h}},TreeNode.prototype.clearFilter=function(){this.hiddenByFilter=!1},TreeNode.prototype.sortRecursivelyBySortIndex=function(){this.hasChild()&&_hasSortIndex(this.children[0])&&this.children.sort(function(a,b){return _hasSortIndex(a)&&_hasSortIndex(b)?a.sortIndex-b.sortIndex:0});for(var a=0;a<this.children.length;a++)this.children[a].sortRecursivelyBySortIndex()};